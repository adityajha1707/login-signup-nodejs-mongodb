<html>
	<head>
		<title>Register Page</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<style type="text/css">#heading { display: flex; justify-content: center; }</style>
	</head>
	<body>
		<div class = "mt-4 container">
			<h1 id = "heading">Register Here</h1>
			<form class = "mt-4">
			  <div class="form-group">
			    <label>Email address</label>
			    <input type="email" class="form-control" id="email" aria-describedby="emailHelp">
			  </div>
			  <div class="form-group">
			    <label>Name</label>
			    <input type="text" class="form-control" id="name">
			  </div>
			  <div class="form-group">
			    <label>Date Of Birth</label>
			    <input type="date" class="form-control" id="dob">
			  </div>
			  <div class="form-group">
			    <label for="exampleInputPassword1">Password</label>
			    <input type="password" class="form-control" id="password">
			  </div>
			  <div class="form-group">
			    <label>Confirm Password</label>
			    <input type="password" class="form-control" id="confirm_password">
			  </div>
			  <button class="btn btn-primary" id = "submitButton">Submit</button>
			  <a class="btn btn-primary" href="login.html" role="button">Login Page</a>
			</form>
		</div>
	</body>
	<script type = "text/javascript">
		$(document).ready(function(){
			$("#submitButton").click(function(){
				event.preventDefault();
				var name = $("#name").val()
				var email = $("#email").val()
				var password = $("#password").val()
				var confirmpassword = $("#confirm_password").val()
				var dob = $("#dob").val()
				if(name && email && password && confirmpassword && dob){
					if(password === confirmpassword){
						$.ajax({
						    url : "http://localhost:3000/user/register",
						    type: "POST",
						    data : {
						    	"email":email,
						    	"name":name,
						    	"password":password,
						    	"dob":dob
						    },
						    success: function(data, textStatus, jqXHR){
						    	if(data)
						    	alert("You have been registered successfully.");
						    	window.location = "login.html";		
						    },
						    error: function (jqXHR, textStatus, errorThrown){
						    	alert("Something went wrong. Please try again.")
						    } 
						});
					}
					else{
						alert("Password and Confirm Password do not match");
					}
				}
				else{
					alert("Please fill all fields.");
				}
			})
		})
	</script>
</html>